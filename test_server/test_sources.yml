source:

  - name: test
    start: http://localhost:8888/html/home.html
    navigate:
      - selector: //ul/li/a/@href
        ftype: html
      - selector: //div[@id='article-body']/p[4]/a/@href|//div[@id='lol-body']/p[4]/a/@href
        ftype: html
    extract:
      ftype: html
      fields:
        - name: title
          selector: /html/body/h1
        - name: body
          selector: //div[@id='article-body']

  - name: test_rss_html
    start: http://localhost:8888/rss/feed.xml
    navigate:
      - selector: link
        ftype: rss
      - selector: //div[@id='lol']/p[4]/a/@href|//div[@id='article-body']/p[4]/a/@href
        ftype: html
    extract:
      ftype: html
      fields:
        - name: title
          selector: /html/body/h1
        - name: body
          selector: //div[@id='article-body']
    transform:
      LLM:
      - name: summarize
        input: [body, title]
        output: article_summary
        model: gpt-4
        prompt: Summarize the following article in a concise manner.
      - name: sentiment
        input: [body]
        output: title_sentiment
        model: gpt-4
        prompt: Analyze the sentiment of the following text and classify it as Positive, Negative, or Neutral.
    load:
      xml:
        fields:
          - field: article_summary
            name: description
          - field: title
            name: title
      json:
        fields:
          - field: title
            name: title


  - name: test_only_rss
    start: http://localhost:8888/rss/feed.xml
    extract:
      ftype: mixed
      fields:
        - name: title
          selector: title
        - name: description
          selector: description
        - name: link
          selector: link
    transform:
      LLM:
      - name: sentiment
        input: [title]
        output: title_sentiment
        model: gpt-4
        prompt: Analyze the sentiment of the following text and classify it as Positive, Negative, or Neutral.
    load:
      json:
        fields:
          - field: title
            name: title
          - field: title
            name: description


  - name: test_rss_html_pdf
    start: http://localhost:8888/rss/feed.xml
    navigate:
      - selector: link
        ftype: mixed
        must_contain: [html]
      - selector: //div[@id='article-rody']/p[5]/a/@href|//div[@id='article-body']/p[5]/a/@href
        ftype: mixed
        must_contain: [.pdf]
    extract:
      ftype: pdf

  - name: test_must_contain_all
    start: http://localhost:8888/html/home.html
    navigate:
      - selector: //ul/li/a/@href
        ftype: html
        must_contain: [article]
        must_contain_all: ["_1", ".html"]
    extract:
      ftype: html
      fields:
        - name: title
          selector: /html/body/h1

  - name: test_json_to_html
    start: http://localhost:8888/json/test.json
    navigate:
      - selector: items.link
        ftype: json
    extract:
      ftype: html
      fields:
        - name: title
          selector: /html/body/h1
        - name: body
          selector: //div[@id='article-body']

  - name: test_json_direct
    start: http://localhost:8888/json/test.json
    extract:
      ftype: json
      fields:
        - name: title
          selector: items.title
        - name: description
          selector: items.description
        - name: date
          selector: items.date
        - name: link
          selector: items.link

  - name: test_json_max_items
    start: http://localhost:8888/json/test.json
    navigate:
      - selector: items.link
        ftype: json
        max_items: 2
    extract:
      ftype: html
      fields:
        - name: title
          selector: /html/body/h1